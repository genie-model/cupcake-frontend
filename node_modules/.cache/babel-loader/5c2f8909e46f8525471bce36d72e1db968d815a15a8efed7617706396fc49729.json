{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import caretRight from\"bootstrap-icons/icons/caret-right.svg\";import caretDown from\"bootstrap-icons/icons/caret-down.svg\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const JobIcon=_ref=>{let{heading,childExist,isOpen,onClick}=_ref;return/*#__PURE__*/_jsxs(\"div\",{onClick:onClick,style:{cursor:\"pointer\"},children:[childExist&&/*#__PURE__*/_jsx(\"img\",{src:isOpen?caretDown:caretRight,alt:\"caret icon\"}),heading]});};const RenderNode=_ref2=>{let{level,heading,childExist,isOpen,onClick}=_ref2;const marginLeft=2*level+\"rem\";return/*#__PURE__*/_jsx(\"div\",{style:{marginLeft},children:/*#__PURE__*/_jsx(JobIcon,{heading:heading,childExist:childExist,isOpen:isOpen,onClick:onClick})});};const RenderTree=_ref3=>{let{node,level,expandedNodes,toggleNode}=_ref3;if(!node)return null;const isOpen=expandedNodes[node.heading];const hasChild=node.child&&Object.keys(node.child).length>0;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(RenderNode,{level:level,heading:node.heading,childExist:hasChild,isOpen:isOpen,onClick:()=>toggleNode(node.heading)}),isOpen&&hasChild&&Object.keys(node.child).map(key=>/*#__PURE__*/_jsx(RenderTree,{node:node.child[key],level:level+1,expandedNodes:expandedNodes,toggleNode:toggleNode},key))]});};const FileStructure=()=>{const[jobs,setJobs]=useState([]);const[expandedNodes,setExpandedNodes]=useState({});const[error,setError]=useState(null);useEffect(()=>{const fetchJobs=async()=>{try{const response=await axios.get(\"http://localhost:8000/jobs\");const jobList=response.data.jobs.map(job=>({heading:job.name,child:{}}));setJobs(jobList);}catch(err){setError(err.message);}};fetchJobs();},[]);const toggleNode=heading=>{setExpandedNodes(prev=>({...prev,[heading]:!prev[heading]}));};if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"file-dir-container\",children:[/*#__PURE__*/_jsx(JobIcon,{heading:\"My Jobs\",childExist:true,isOpen:expandedNodes[\"My Jobs\"],onClick:()=>toggleNode(\"My Jobs\")}),expandedNodes[\"My Jobs\"]&&jobs.map((job,index)=>/*#__PURE__*/_jsx(RenderTree,{node:job,level:1,expandedNodes:expandedNodes,toggleNode:toggleNode},index))]});};export default FileStructure;","map":{"version":3,"names":["React","useState","useEffect","axios","caretRight","caretDown","jsx","_jsx","jsxs","_jsxs","JobIcon","_ref","heading","childExist","isOpen","onClick","style","cursor","children","src","alt","RenderNode","_ref2","level","marginLeft","RenderTree","_ref3","node","expandedNodes","toggleNode","hasChild","child","Object","keys","length","map","key","FileStructure","jobs","setJobs","setExpandedNodes","error","setError","fetchJobs","response","get","jobList","data","job","name","err","message","prev","className","index"],"sources":["/home/ravitheja/cupcake-frontend/src/components/FileStructure.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport caretRight from \"bootstrap-icons/icons/caret-right.svg\";\nimport caretDown from \"bootstrap-icons/icons/caret-down.svg\";\n\nconst JobIcon = ({ heading, childExist, isOpen, onClick }) => {\n  return (\n    <div onClick={onClick} style={{ cursor: \"pointer\" }}>\n      {childExist && (\n        <img src={isOpen ? caretDown : caretRight} alt=\"caret icon\" />\n      )}\n      {heading}\n    </div>\n  );\n};\n\nconst RenderNode = ({ level, heading, childExist, isOpen, onClick }) => {\n  const marginLeft = 2 * level + \"rem\";\n  return (\n    <div style={{ marginLeft }}>\n      <JobIcon\n        heading={heading}\n        childExist={childExist}\n        isOpen={isOpen}\n        onClick={onClick}\n      />\n    </div>\n  );\n};\n\nconst RenderTree = ({ node, level, expandedNodes, toggleNode }) => {\n  if (!node) return null;\n\n  const isOpen = expandedNodes[node.heading];\n  const hasChild = node.child && Object.keys(node.child).length > 0;\n\n  return (\n    <div>\n      <RenderNode\n        level={level}\n        heading={node.heading}\n        childExist={hasChild}\n        isOpen={isOpen}\n        onClick={() => toggleNode(node.heading)}\n      />\n      {isOpen &&\n        hasChild &&\n        Object.keys(node.child).map((key) => (\n          <RenderTree\n            key={key}\n            node={node.child[key]}\n            level={level + 1}\n            expandedNodes={expandedNodes}\n            toggleNode={toggleNode}\n          />\n        ))}\n    </div>\n  );\n};\n\nconst FileStructure = () => {\n  const [jobs, setJobs] = useState([]);\n  const [expandedNodes, setExpandedNodes] = useState({});\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchJobs = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:8000/jobs\");\n        const jobList = response.data.jobs.map((job) => ({\n          heading: job.name,\n          child: {},\n        }));\n        setJobs(jobList);\n      } catch (err) {\n        setError(err.message);\n      }\n    };\n\n    fetchJobs();\n  }, []);\n\n  const toggleNode = (heading) => {\n    setExpandedNodes((prev) => ({\n      ...prev,\n      [heading]: !prev[heading],\n    }));\n  };\n\n  if (error) {\n    return <div>Error: {error}</div>;\n  }\n\n  return (\n    <div className=\"file-dir-container\">\n      <JobIcon\n        heading=\"My Jobs\"\n        childExist={true}\n        isOpen={expandedNodes[\"My Jobs\"]}\n        onClick={() => toggleNode(\"My Jobs\")}\n      />\n      {expandedNodes[\"My Jobs\"] &&\n        jobs.map((job, index) => (\n          <RenderTree\n            key={index}\n            node={job}\n            level={1}\n            expandedNodes={expandedNodes}\n            toggleNode={toggleNode}\n          />\n        ))}\n    </div>\n  );\n};\n\nexport default FileStructure;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}